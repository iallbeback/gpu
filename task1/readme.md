
# Jacobi3D Benchmark: CPU vs GPU

Этот проект реализует трёхмерную численную итерационную схему Якоби с поддержкой запуска:
- на CPU (с использованием OpenMP),
- на GPU (с использованием CUDA).

Также включена утилита сравнения, позволяющая анализировать точность расчётов и производительность разных реализаций.

## Структура проекта

- **`jacobi3d_cpu.c`** — реализация на CPU с использованием OpenMP.
- **`jacobi3d_gpu.cu`** — реализация на CUDA.
- **`compare_results.c`** — программа для запуска обеих версий и сравнения результатов (`EPS`) и времени выполнения.
- **`Makefile`** — сборка всех компонентов, а также запуск тестов (`make`, `make run`, `make test_blocks`, `make clean`).
- **`cpu_output.txt`, `gpu_output.txt`** — выводы расчётов для последующего анализа (генерируются автоматически).
- **Выбор точности (`float`/`double`)** — через `typedef real_t`, выбор осуществляется с помощью флага компиляции.

## Сборка проекта

Для сборки всех файлов:

```bash
make
```

## Запуск программ

Запуск CPU-версии:

```bash
./jacobi3d_cpu
```

Запуск GPU-версии:

```bash
./jacobi3d_gpu
```

Автоматический запуск обеих версий и сравнение результатов:

```bash
make run
```

Запуск серии экспериментов с различными размерами CUDA-блоков:

```bash
make test_blocks
```

В этом случае выполняются запуски при следующих вариантах: 
4x4x4 
8x8x8 
16x16x16 
32x32x1 16x8x4 
8x16x4 
4x16x8 
32x4x4 
16x4x4 
8x8x4 
4x4x8 
2x2x2 
4x8x8 
8x4x8 
8x8x4 
16x16x1 
32x8x1 
64x4x1

## Пример результатов (на кластере Polus)

При использовании CUDA-блоков размера `16 × 4 × 4` были получены следующие результаты:

```bash
--- Comparison Report ---
CPU eps: 60.63202400
GPU eps: 60.63202400
CPU time: 7.49 sec
GPU time: 1.64 sec
Speedup (CPU/GPU): 4.57x
✅ EPS values match (within threshold).
```

---

## Эксперимент по подбору размеров CUDA-блоков

Был проведён эксперимент по измерению производительности для различных размеров CUDA-блоков.  
Наиболее эффективной конфигурацией оказался размер блока `16 × 4 × 4`, обеспечивший наилучшее ускорение GPU по сравнению с CPU. А `16 × 16 × 16` работаел некорректно, из-за чего отсутствует в графике.

Результаты эксперимента представлены на графике:

![График зависимости ускорения от размеров блока](https://github.com/user-attachments/assets/58dc24d9-9982-4c0a-bd12-81e87d917e8b)

---

